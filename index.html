<!DOCTYPE html>
<html>
    <head>
        
        <meta name="viewport" content="width=device-width; height=device-height; initial-scale=1.0; maximum-scale=1.0;  user-scalable=no">
        
        <!--<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>-->
        <meta name="apple-mobile-web-app-capable" content="yes">
        <meta name="apple-mobile-web-app-status-bar-style" content="default">
            
        
        
        <script type="text/javascript" src="script/jquery-1.6.1.js"></script>
        
      <!-- <script type="text/javascript" src="jquery.mobile-1.0b1/jquery.mobile-1.0b1.js"></script>-->
        <script type="text/javascript" src="script/shopping.js"></script>
        <script type="text/javascript" src="script/iscroll.js"></script>
         <script type="text/javascript" src="script/phonegap.0.9.5.1.js"></script>
       
        
        
        <link rel="apple-touch-icon" href="img/AA_app_ICON.png">
        <link rel="apple-touch-icon-precompsed" href="img/AA_app_ICON_android_bookmark_60.png">
        <link rel="apple-touch-startup-image" href="img/AA_splash_page_scaled.png">
        
        <link type="text/css" rel="stylesheet" href="jquery.mobile-1.0b1/jquery.mobile-1.0b1.css">
        <link type="text/css" rel="stylesheet" href="style/style.css">
            
        
        
     
       <script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=true"></script> 
        <title>Aisle Alley</title>
    
        
        <style>
                       
            .tabbar-wrapper li i {
                -webkit-mask-image: -webkit-canvas(tabbar-icons);
            }
            .tabbar-wrapper li b {
                background-image: -webkit-canvas(tabbar-icons);
            }
            
            .tabbar-wrapper li:nth-child(1) i { -webkit-mask-position-x: 0px; }
            .tabbar-wrapper li:nth-child(2) i { -webkit-mask-position-x: -36px; }
            .tabbar-wrapper li:nth-child(3) i { -webkit-mask-position-x: -72px; }
            .tabbar-wrapper li:nth-child(4) i { -webkit-mask-position-x: -108px; }
            .tabbar-wrapper li:nth-child(5) i { -webkit-mask-position-x: -144px; }
        </style>
        <script>
        const AREA_SIZE = 36;
       
        /* Prepare the 5 states of 5 icons */
        initTabBarIcons("tabbar-icons", 5); 
        function initTabBarIcons(id, count) {
            var ctx = document.getCSSCanvasContext("2d", id, AREA_SIZE * count, AREA_SIZE * count);
               for(var j=1; j<=count; j++){
                var i = new Image();
               
                 switch (j){
                    case 1:
                       i.src = "img/Featured_ICON.png";
                        i.onload = function() {
                        ctx.drawImage(this, 0, 0);
                        
                    }
                       break;
                   case 2:
                       i.src = "img/Find-Products-ICON.png";
                        i.onload = function() {
                        ctx.drawImage(this, 36, 0);
                        
                    }
                       break;
                   case 3:
                       i.src = "img/Shopping-List-ICON.png";
                        i.onload = function() {
                        ctx.drawImage(this, 72, 0);
                        
                         }
                       break;
                   case 4:
                       i.src = "img/Store-Locator-ICON.png";
                        i.onload = function() {
                        ctx.drawImage(this, 108, 0);
                        
                        }
                       break;
                    case 5:
                       i.src = "img/Featured_ICON.png";
                        i.onload = function() {
                        ctx.drawImage(this, 144, 0);
                        
                        }
                       break;
                 } //end switch  
                }//end for
            
        }
        
        
        </script>
        <script type="text/javascript" language="javascript">
        
        
        var myScroll;
        
       function onCompletion () {
        // Here modify the DOM in any way, eg: by adding LIs to the scroller UL
        
            setTimeout(function () {
                myScroll.refresh();
            }, 0);
        };
        $(document).ready(function() {
            loadPage();
            var FeaturedIcon=document.getElementsByTagName('i')[0];
            $(FeaturedIcon).addClass('iactivelink');
            
        });
        
       if(DetectIphoneOrIpod()==true||DetectIpad()==true){
        $(document).ready(function () {
            var viewportwidth;
            var viewportheight;
            viewportwidth = window.innerWidth;
            viewportheight = window.innerHeight;
            
            function reorient(e) {
                
                var landscape = (window.orientation == 90|| window.orientation== -90);// landscape true= landscape
                if(landscape==true){
                   
                    viewportwidth = window.innerWidth;
                    viewportheight = window.innerHeight;
                    viewport = document.querySelector("meta[name=viewport]");
                    viewport.setAttribute('content', 'width=device-height; initial-scale=1.0; maximum-scale=1.0; user-scalable=0;');
                    viewport.setAttribute('content', 'height='+window.innerHeight+'px');// iPhone
                     
                    Size();
                   onCompletion(); 
                    
                    
                }// end if landscape
                else{
                    
                        viewport =  document.querySelector("meta[name=viewport]");
                        viewport.setAttribute('content', 'width=device-width; height=device-height; initial-scale=1.0; maximum-scale=1.0; user-scalable=0;');
                        
                        Size();
                        onCompletion();
                }
            }
            window.onorientationchange = reorient;
            window.setTimeout(reorient, 0);
            
        });
       }//end if iPhone or iPod
       if(DetectAndroid()==true){
         $(document).ready(function () {
            var oldOrientatin, newOrientation;
            //var ScreenWidth =screen.width;
            //var ScreenHeight= screen.height;
            // Detect whether device supports orientationchange event, otherwise fall back to
            // the resize event.
            var supportsOrientationChange = "onorientationchange" in window,
                orientationEvent = supportsOrientationChange ? "orientationchange" : "resize";
           
            
            window.addEventListener(orientationEvent , function() {
                //var viewportwidth; var viewportheight;
                
                var landscape = (window.orientation == 90|| window.orientation== -90);// landscape true= landscape
                if(landscape==true)
                {
                    newOrientation='landscape';
                }
                else{
                    newOrientation='portrait';
                }
                 if(landscape==true&& newOrientation!=oldOrientatin){
                    viewport = document.querySelector("meta[name=viewport]");
                    viewport.setAttribute('content', 'width=device-height; initial-scale=1.0; maximum-scale=1.0;  user-scalable=no;');
                    viewport.setAttribute('content', 'height='+window.innerHeight+'px');
                    setTimeout(function(){
                        //alert('screen.height is '+screen.height+'screen.width is '+ screen.width);
                        Size();
                        onCompletion();
                        },500);
                    
                    oldOrientatin='landscape';
                    
                 }
                 if(landscape==false && newOrientation!=oldOrientatin ){
                    viewport =  document.querySelector("meta[name=viewport]");
                    viewport.setAttribute('content', 'width=device-width; height=device-height; initial-scale=1.0; maximum-scale=1.0;  user-scalable=no;');
                     setTimeout(function(){
                        //alert('screen.height is '+screen.height+'screen.width is '+ screen.width);
                        Size();
                        onCompletion();
                        },500);
                   
                    oldOrientatin='portrait';
                 }
            }, false);// end addEventListener
         });// end document.ready
       }// end detect Android
       
       
        
        connect_db();// only once
        function loadPage(url) {
            
            $('#footer a i').each(function(){
                    $('i').removeClass('iactivelink');
                    $('i').addClass('iinactivelink');
                    });
            $("#content").append(' <div id="progress" >Loading...<br /><img src="img/ajax-loader-big.gif" /></div>');
            scrollTo(0, 0);
            if (url == undefined) {
                hijackLinks();
            } else {
                $('#container').load(url + ' #container', hijackLinks);
                
            }
        }
        function hijackLinks() {

            
            
            
            $('#footer a').unbind('click').click(function(e) {
                e.preventDefault();
                
                if(e.target.tagName.toLowerCase() == 'img'){// if click on the img tab bar
                    loadPage(e.target.parentNode.href);
                }
                else{
                    if(e.target.tagName.toLowerCase() =='a')
                    {
                        loadPage(e.target.href);
                        var child1=$(e.target).children();
                        var child2=$(child1).children();
                        $(child2).addClass('iactivelink');
                        //alert('in a');
                       
                        
                    }
                    else
                    {
                        if(e.target.tagName.toLowerCase() =='b')
                        {
                            loadPage(e.target.parentNode.href);
                            var child1=$(e.target).children();
                            $(child1).addClass('iactivelink');
                            //alert('in b');
                            
                        }
                        else
                        {
                            if(e.target.tagName.toLowerCase() =='i')
                            {
                                loadPage(e.target.parentNode.parentNode.href);
                                $(e.target).addClass('iactivelink');
                                //alert('in i');
                              
                            }
                        }
                        
                    }
                }
               
            });
            //resize the container 
            Size();
            
            // scroll the content
            var content=document.getElementById('content');
            if(content){
               
                myScroll = new iScroll('content', { hScrollbar:false, desktopCompatibility: true, snap:true});
                myScroll.refresh();
                
            }
            $(document.getElementById('Category')).ready(function() {
                        // show all the products when div is ready
                   //findShoppingProducts();
                   ShowProductsByCategory();
                
            });
            $(document.getElementById('map_canvas')).ready(function() {
                        // show google map when div is ready
                   initialize();
            });
            
            $(document.getElementById('Recipes')).ready(function() {
                   //show all recipes     
                   recipesList();
            });
            $(document.getElementById('resultListViewThumbnails')).ready(function(){
                // show all products on find products page first load
                ShowAllProducts();
                
            });
            
            $('#progress').remove();       
        }
        </script>
    </head>
    <body >
        <div id="position" data-role="page">
            <div id="container" >                   
                    <div class="toolbar" id="Toolbar" >
                        <h1> Featured</h1>
                       <!--<a class="logo"></a>-->
                       <img src="img/AA_top_bar_icon.png" alt="Logo" class="logo">
                       
                    </div><!--End of toolbar -->
                
               
                   
                        <div id="content" >
                            <div style="display:inline-block;">
                                <div>
                                    <div class="small_content"></div>
                                    <div class="small_content"></div>
                                </div>
                                <div class="clearfix"></div>
                                
                                <div class="big_content"></div>
                            </div>
                        </div>
                    
               <!--</div>-->
           </div>
           
          <!-- fixed on the bottom page-->
           <div id="footer" data-role="footer">
            
            <nav class="tabbar-wrapper">
                <ul>
                    <li ><a rel="external" href="index.html" ><b><i></i></b>Featured</a></li>
                    <li><a rel="external" href="findProducts.html" ><b><i></i></b>Find Products</a></li>
                    <li><a rel="external" href="shoppingList.html"><b><i></i></b>Shopping List</a></li>
                    <li><a rel="external" href="storeLocation.html"><b><i></i></b>Store Locator</a></li>
                    <li><a rel="external" href="recipes.html" ><b><i></i></b>Recipes</a></li>
                </ul>
            </nav>
            
          </div>
       </div> <!--End of position -->  
            
    </body>
    <script>
    
        function Size(){
            var hScreen=window.innerHeight;// works for iPhone
            var landscape = (window.orientation == 90|| window.orientation== -90);// landscape true= landscape
            //var WidthScreen=window.innerWidth;
            // size the bottom menu
            var hFooter= document.getElementById("footer").clientHeight;
            //var wPosition=document.getElementById("position").clientWidth;
            //var hPosition=document.getElementById("position").clientHeight;
            //wPosition=WidthScreen;
            //hPosition=hScreen-hFooter;
            
            if(DetectAndroid()==true){
                var addressBar;
                if(landscape==true){
                    addressBar=320-hScreen;
                }
                else{
                    addressBar=533-hScreen;
                }
                
                var calculateHeight=hScreen-hFooter;
                //alert("hScreen is "+ hScreen+ "h footer is "+ hFooter +" address bar is "+ addressBar);//h screen 239 android
            }
            else{
                var calculateHeight=hScreen-hFooter;
            }
             $('#container').height(calculateHeight);
            //contentdiv.style.width=WidthScreen+ "px";
            //alert("container height is" + $('#container').height());
            
            ////$('#container').width(window.innerWidth);
            $('#container').width('100%');
            // for the find products page - product details list view 
            if($('#searchbar').height()==null)
            {
                if($("#BestMatchBar").height()==null)
                    $('#content').height($("#container").height()-$("#Toolbar").height());
                if($("#BestMatchBar").height()!=null)
                     $('#content').height($("#container").height()-$("#Toolbar").height()-$("#BestMatchBar").height());
            }
            else{
                if($("#BestMatchBar").height()==null)
                    $('#content').height($("#container").height()-$("#Toolbar").height()-$("#searchbar").height());
                if($("#BestMatchBar").height()!=null)
                    if($('#searchbar').css('display')!="none" && $('#BestMatchBar').css('display')!="none")
                        {
                            
                            $('#content').height($("#container").height()-$("#Toolbar").height()-$("#searchbar").height()-$("#BestMatchBar").height());
                        }
                    else
                    {
                        
                        $('#content').height($("#container").height()-$("#Toolbar").height());
                    }
            }
            ////$('#content').width($('#container').width());
           $('#content').width('100%');
           var contentClientWidth=document.getElementById('content').clientWidth;
           //alert("content client width is "+ contentClientWidth);//533
           //alert('content height is'+ $('#content').height());
           
           $('.big_content').width(contentClientWidth-12);// div big_content 10 px from margin-left and margin-right and 2 px from border left and right
           $('.small_content').width(contentClientWidth/2-12);//10 margin 2border
            ////$('.big_content').width($("#content").width()-12-2);// div big_content 10 px from margin-left and margin-right and 2 px from border left and right
            ////$('.small_content').width($("#content").width()/2-12);
            //alert("big content width "+  $('.big_content').width() + "small content width "+ $('.small_content').width());
       
        
        }
        
        
        
       
 
      //  function getWidth()
      //  {
      //    xWidth = null;
      //    if(window.screen != null)
      //      xWidth = window.screen.availWidth;
      // 
      //    if(window.innerWidth != null)
      //      xWidth = window.innerWidth;
      // 
      //    if(document.body != null)
      //      xWidth = document.body.clientWidth;
      // 
      //    return xWidth;
      //  }
      //function getHeight() {
      //  xHeight = null;
      //  if(window.screen != null)
      //    xHeight = window.screen.availHeight;
      // 
      //  if(window.innerHeight != null)
      //    xHeight =   window.innerHeight;
      // 
      //  if(document.body != null)
      //    xHeight = document.body.clientHeight;
      // 
      //  return xHeight;
      //}
 

    </script>
  
</html>